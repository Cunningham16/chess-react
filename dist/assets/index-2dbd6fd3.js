import{r as i,a as A,j as u}from"./index-4d9f0b2e.js";import{j as B,c as C,B as q,P as D,a as H,G,b as L}from"./createBoard-f4ba538b.js";function z(){const[d,P]=i.useState(new B.Game),[p,k]=i.useState("white"),[o,y]=i.useState(C()),[v,E]=i.useState([]),[F,M]=i.useState([]),[l,h]=i.useState({type:void 0,status:!1,color:void 0}),[O,W]=i.useState(!1),[S,b]=i.useState(!1),[g,w]=i.useState(!1),j={fallenFiguresLight:v,setFallenFiguresLight:E,fallenFiguresDark:F,setFallenFiguresDark:M,boardArray:o,setBoardArray:y,turn:p,setTurn:k,isEndCase:l,setIsEndCase:h,isRetry:S,setIsRetry:b,boardEngine:d,setBoardEngine:P,isPromote:O,setIsPromote:W,isPlayerMadeMove:g,setIsPlayerMadeMove:w};function I(){if(l.status===!0&&l.type==="checkmate")return u(G,{message:"Checkmate",whoLose:l.color});if(l.status===!0&&l.type==="pat")return u(G,{message:"Pat",whoLose:l.color})}function N(t){for(let n in t){let r=L(n),s=L(t[n]);for(let f of o)if(f.position.x===r.x&&f.position.y===r.y){if(f.whatPlaced.id==="king"){if(r.x===4&&r.y===0){if(s.x===2&&s.y===0){for(let e of o)if(e.position.x===0&&e.position.y===0){let c=e.whatPlaced;x(e);for(let a of o)a.position.x===3&&a.position.y===0&&m(a,c)}}else if(s.x===6&&s.y===0){for(let e of o)if(e.position.x===7&&e.position.y===0){let c=e.whatPlaced;x(e);for(let a of o)a.position.x===5&&a.position.y===0&&m(a,c)}}}else if(r.x===4&&r.y===7){if(s.x===6&&s.y===7){for(let e of o)if(e.position.x===7&&e.position.y===7){let c=e.whatPlaced;x(e);for(let a of o)a.position.x===5&&a.position.y===7&&m(a,c)}}else if(s.x===2&&s.y===7){for(let e of o)if(e.position.x===0&&e.position.y===7){let c=e.whatPlaced;x(e);for(let a of o)a.position.x===3&&a.position.y===7&&m(a,c)}}}}let R=f.whatPlaced;x(f),f.whatPlaced=void 0;for(let e of o)e.position.x===s.x&&e.position.y===s.y&&(e.whatPlaced!==void 0&&T(e.whatPlaced.color,e),m(e,R),w(!1))}}}function x(t){let n=o.indexOf(t);y(o.map((r,s)=>(n===s&&(r.whatPlaced=void 0),r)))}function m(t,n){let r=o.indexOf(t);y(o.map((s,f)=>(r===f&&(s.whatPlaced=n),s)))}function T(t,n){t==="black"?F.push(n.whatPlaced):t==="white"&&v.push(n.whatPlaced)}return i.useEffect(()=>{let t=d.exportJson();t.checkMate===!0?h({status:!0,type:"checkmate",color:p}):t.isFinished===!0&&t.checkMate===!1&&h({status:!0,type:"pat",color:p}),g===!0&&l.status!==!0&&(setTimeout(()=>{d.board.configuration.checkMate===!0&&h({status:!0,type:"checkmate",color:p}),N(d.aiMove(0)),P(d)},700),d.board.configuration.checkMate===!0&&h({status:!0,type:"checkmate",color:p}))},[g]),i.useEffect(()=>{I(),y(o.map(t=>(t.setDot=void 0,t)))},[l]),i.useEffect(()=>{if(h({type:void 0,status:!1,color:void 0}),y(C()),M([]),E([]),b(!1),w(!1),p==="black"){const t=document.querySelector(".board-game");t.style.flexDirection="column"}P(new B.Game),k("white")},[S]),A("section",{className:"game-session",children:[u("div",{className:"board-game",children:A(q.Provider,{value:j,children:[I(),u(D,{color:"black",isPlayWithAI:!0}),u(H,{isPlayWithAI:!0}),u(D,{color:"white",isPlayWithAI:!0})]})}),u("div",{className:"change-log",children:"Hello world"})]})}export{z as default};
